<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìëª¨ì¡°ë¦½ì†Œ</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.1.4/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-800 text-white transition duration-500">
    <div class="container mx-auto p-4">
        <!-- íƒ€ì´í‹€ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold">ìëª¨ì¡°ë¦½ì†Œ</h1>
        </div>

        <!-- íƒ­ ë©”ë‰´ -->
        <div class="flex mb-4">
            <button id="tabFile" class="flex-1 text-center py-2 rounded-lg bg-gray-700 hover:bg-gray-600">íŒŒì¼ëª… í•©ì¹˜ê¸°</button>
            <button id="tabText" class="flex-1 text-center py-2 rounded-lg bg-gray-700 hover:bg-gray-600 ml-2">í…ìŠ¤íŠ¸ ìëª¨ í•©ì¹˜ê¸°</button>
        </div>

        <!-- íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ -->
        <div id="fileUploadSection">
            <div id="dropZone" class="flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-4 h-64 hover:bg-gray-700 cursor-pointer">
                <p class="text-gray-300 text-lg">íŒŒì¼ì„ ì´ê³³ìœ¼ë¡œ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ.</p>
                <input type="file" id="fileInput" class="hidden" multiple>
            </div>
        </div>

        <!-- í…ìŠ¤íŠ¸ ì…ë ¥ ì˜ì—­ -->
        <div id="textInputSection" class="hidden">
            <textarea id="textInput" class="w-full p-2 rounded-lg bg-gray-700 focus:outline-none h-32"></textarea>
            <button id="processText" class="mt-2 w-full py-2 rounded-lg bg-blue-500 hover:bg-blue-400">í…ìŠ¤íŠ¸ ìëª¨ í•©ì¹˜ê¸°</button>
        </div>

        <!-- ê°œë°œì ì •ë³´ -->
        <div class="text-center mt-8">
            <p>ë•…ì½©í‚¹ë•…ì½©ğŸ¥œ</p>
            <a href="https://gomguk.tistory.com/" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300">ë¸”ë¡œê·¸</a> |
            <a href="https://github.com/colfax0483/win_file_renamer" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300">GitHub</a>
        </div>
    </div>

    <script>
        // íƒ­ê³¼ ì„¹ì…˜ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const tabFile = document.getElementById('tabFile');
        const tabText = document.getElementById('tabText');
        const fileUploadSection = document.getElementById('fileUploadSection');
        const textInputSection = document.getElementById('textInputSection');
        const nightModeSwitch = document.getElementById('nightModeSwitch');
        const body = document.body;

        // íƒ­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        tabFile.addEventListener('click', () => {
            fileUploadSection.style.display = 'block';
            textInputSection.style.display = 'none';
        });

        tabText.addEventListener('click', () => {
            fileUploadSection.style.display = 'none';
            textInputSection.style.display = 'block';
        });

        // ì´ˆê¸° íƒ­ ì„¤ì •
        tabFile.click();

        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');

        dropZone.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFiles);

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('bg-blue-100');
        });

        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('bg-blue-100');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('bg-blue-100');
            const files = e.dataTransfer.files;
            handleFiles({ target: { files } });
        });

        function handleFiles(event) {
            const files = event.target.files;
            Array.from(files).forEach(file => {
                const nfcFilename = file.name.normalize('NFC');
                const blob = new Blob([file], { type: file.type });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = nfcFilename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });
        }

    </script>
</body>
</html>
